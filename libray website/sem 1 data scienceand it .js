// ✅ DATA SCIENCE SEM 1 PAGE (pages/data-science/sem1.js)
import Navbar from '../../components/Navbar';
import { useEffect, useState } from 'react';

export default function DataScienceSem1() {
  const [unlocked, setUnlocked] = useState(false);

  useEffect(() => {
    const isPaid = localStorage.getItem('ds_sem1_paid');
    if (isPaid === 'true') setUnlocked(true);
  }, []);

  const handlePayment = async () => {
    const res = await fetch('/api/create-order', { method: 'POST' });
    const order = await res.json();

    const options = {
      key: 'YOUR_KEY_ID',
      amount: order.amount,
      currency: order.currency,
      name: 'TextbookVideo Hub',
      description: 'Unlock Data Science Sem 1',
      order_id: order.id,
      handler: function (response) {
        localStorage.setItem('ds_sem1_paid', 'true');
        setUnlocked(true);
        alert('Payment Successful');
      },
      prefill: {
        email: 'testuser@example.com'
      },
      theme: {
        color: '#3399cc'
      }
    };

    const rzp = new window.Razorpay(options);
    rzp.open();
  };

  useEffect(() => {
    if (!window.Razorpay) {
      const script = document.createElement('script');
      script.src = 'https://checkout.razorpay.com/v1/checkout.js';
      script.async = true;
      document.body.appendChild(script);
    }
  }, []);

  const subjects = [
    { name: 'Introduction to Data Science', file: '/pdfs/data-intro.pdf' },
    { name: 'Python Basics', file: '/pdfs/python-basics.pdf' },
    { name: 'Statistics for Data Science', file: '/pdfs/statistics.pdf' },
    { name: 'Database Systems', file: '/pdfs/database.pdf' },
    { name: 'Data Visualization', file: '/pdfs/visualization.pdf' },
    { name: 'Excel & Tableau', file: '/pdfs/excel-tableau.pdf' },
    { name: 'Mini Project', file: '/pdfs/project.pdf' },
    { name: 'Lab Python', file: '/pdfs/lab-python.pdf' },
    { name: 'Communication', file: '/pdfs/comm.pdf' },
    { name: 'Big Data Overview', file: '/pdfs/bigdata.pdf' },
    { name: 'Ethics in AI', file: '/pdfs/ethics.pdf' },
  ];

  return (
    <>
      <Navbar />
      <div className="p-8">
        <h1 className="text-2xl font-semibold mb-6">Data Science - Semester 1</h1>
        {!unlocked ? (
          <div className="text-center">
            <p className="mb-4">Unlock this semester for ₹30</p>
            <button onClick={handlePayment} className="bg-blue-600 text-white px-6 py-2">Pay & Unlock</button>
          </div>
        ) : (
          <ul className="space-y-3">
            {subjects.map((subj, i) => (
              <li key={i} className="border-b pb-2">
                <span className="font-medium">{subj.name}:</span>
                <a href={subj.file} className="text-blue-600 hover:underline ml-2" target="_blank" rel="noreferrer">View PDF</a>
              </li>
            ))}
          </ul>
        )}
      </div>
    </>
  );
}


// ✅ IT SEM 1 PAGE (pages/it/sem1.js)
import Navbar from '../../components/Navbar';
import { useEffect, useState } from 'react';

export default function ITSem1() {
  const [unlocked, setUnlocked] = useState(false);

  useEffect(() => {
    const isPaid = localStorage.getItem('it_sem1_paid');
    if (isPaid === 'true') setUnlocked(true);
  }, []);

  const handlePayment = async () => {
    const res = await fetch('/api/create-order', { method: 'POST' });
    const order = await res.json();

    const options = {
      key: 'YOUR_KEY_ID',
      amount: order.amount,
      currency: order.currency,
      name: 'TextbookVideo Hub',
      description: 'Unlock IT Sem 1',
      order_id: order.id,
      handler: function (response) {
        localStorage.setItem('it_sem1_paid', 'true');
        setUnlocked(true);
        alert('Payment Successful');
      },
      prefill: {
        email: 'testuser@example.com'
      },
      theme: {
        color: '#3399cc'
      }
    };

    const rzp = new window.Razorpay(options);
    rzp.open();
  };

  useEffect(() => {
    if (!window.Razorpay) {
      const script = document.createElement('script');
      script.src = 'https://checkout.razorpay.com/v1/checkout.js';
      script.async = true;
      document.body.appendChild(script);
    }
  }, []);

  const subjects = [
    { name: 'IT Fundamentals', file: '/pdfs/it-fundamentals.pdf' },
    { name: 'Web Development Basics', file: '/pdfs/web-dev.pdf' },
    { name: 'Computer Networks', file: '/pdfs/networks.pdf' },
    { name: 'Cyber Security', file: '/pdfs/cyber.pdf' },
    { name: 'Programming with Java', file: '/pdfs/java.pdf' },
    { name: 'Database Concepts', file: '/pdfs/it-db.pdf' },
    { name: 'Project Management', file: '/pdfs/project-mgmt.pdf' },
    { name: 'Lab Java', file: '/pdfs/lab-java.pdf' },
    { name: 'Mobile Computing', file: '/pdfs/mobile.pdf' },
    { name: 'Ethics & Governance', file: '/pdfs/ethics-governance.pdf' },
    { name: 'Design Thinking', file: '/pdfs/design-thinking.pdf' },
  ];

  return (
    <>
      <Navbar />
      <div className="p-8">
        <h1 className="text-2xl font-semibold mb-6">IT - Semester 1</h1>
        {!unlocked ? (
          <div className="text-center">
            <p className="mb-4">Unlock this semester for ₹30</p>
            <button onClick={handlePayment} className="bg-blue-600 text-white px-6 py-2">Pay & Unlock</button>
          </div>
        ) : (
          <ul className="space-y-3">
            {subjects.map((subj, i) => (
              <li key={i} className="border-b pb-2">
                <span className="font-medium">{subj.name}:</span>
                <a href={subj.file} className="text-blue-600 hover:underline ml-2" target="_blank" rel="noreferrer">View PDF</a>
              </li>
            ))}
          </ul>
        )}
      </div>
    </>
  );
}
